\chapter[Summary of Proposed Work]{Summary of\\Proposed Work}
\label{chap:proposed}

\section{Research Questions}
\label{sec:research-questions}

I propose to address the following seven research questions
in this thesis.
This section discusses each question in turn.
See Table~\ref{table:proposed-timeline} for a timeline.

\begin{center}
\begin{tabular}{llc}
\toprule
   \multicolumn{2}{l}{Research Question}
      & Chapter \\
\midrule
   \ref{ques:choosing-lambda}
      &
      \begin{minipage}[c]{0.75\columnwidth}%
      \nameref{ques:choosing-lambda}
      \end{minipage}%
      & \ref{chap:e8} \\[12pt]
   \ref{ques:incremental-search}
      &
      \begin{minipage}[c]{0.75\columnwidth}%
      \nameref{ques:incremental-search}
      \end{minipage}%
      & \ref{chap:e8} \\[12pt]
   \ref{ques:e8-comparisons}
      &
      \begin{minipage}[c]{0.75\columnwidth}%
      \nameref{ques:e8-comparisons}
      \end{minipage}%
      & \ref{chap:e8} \\[12pt]
   \ref{ques:batching}
      &
      \begin{minipage}[c]{0.75\columnwidth}%
      \nameref{ques:batching}
      \end{minipage}%
      & \ref{chap:graphs-in-continuous} \\[12pt]
   \ref{ques:evalpath}
      &
      \begin{minipage}[c]{0.75\columnwidth}%
      \nameref{ques:evalpath}
      \end{minipage}%
      & \ref{chap:graphs-in-continuous} \\[12pt]
   \ref{ques:multi-set-suited}
      &
      \begin{minipage}[c]{0.75\columnwidth}%
      \nameref{ques:multi-set-suited}
      \end{minipage}%
      & \ref{chap:multi-set-prm} \\[12pt]
   \ref{ques:how-sequence}
      &
      \begin{minipage}[c]{0.75\columnwidth}%
      \nameref{ques:how-sequence}
      \end{minipage}%
      & \ref{chap:task-planning} \\[12pt]
   \ref{ques:drc-compare}
      &
      \begin{minipage}[c]{0.75\columnwidth}%
      \nameref{ques:drc-compare}
      \end{minipage}%
      & \ref{chap:experiments} \\[12pt]
\bottomrule
\end{tabular}
\end{center}

{
%\renewcommand\thesubsection{\thesection.Q\arabic{subsection}}
\renewcommand\thesubsection{Q\arabic{subsection}}

\subsection{How should the $\lambda$ parameter mediating
   between planning and execution cost in the E$^8$
   search algorithm be chosen?}
\label{ques:choosing-lambda}

See Chapter~\ref{chap:e8}.

The E$^8$ algorithm's objective,
from (\ref{eqn:general-objective-explicit}),
trades off between planning and execution effort,
mediated by the parameter $\lambda \in [0,1]$.
Loosely,
adjusting $\lambda$ varies the behavior between
\emph{feasibility} (finding paths quickly)
and \emph{optimality} (of execution).

With $\lambda=0$,
E$^8$ focuses solely on minimizing execution effort.
This is similar to the LazyPRM algorithm.
On the other hand,
with $\lambda=0$,
it focuses solely on minimizing planning effort,
similarly to the RRT algorithm.
We discuss these comparisons to existing continuous-space planners
in Chapter~\ref{chap:graphs-in-continuous}.

If our ensemble effort model $\mathcal{M}$
specifies effort estimates in the same units
(e.g. time or energy),
$\lambda=\frac{1}{2}$ is a natural choice.
However,
due to the optimistic nature of the E$^8$ algorithm,
a different value of $\lambda$ may perform better in practice.

Minimizing total time in a greedy fashion implies $\lambda = 0.5$.
For later steps in a multi-step plan,
we might have an estimate of the probability $P_e$ that the given query will
actually be executed.
We can then pose our optimistic objective as total planning and execution
time in expection;
this induces the following parameter choice:
\begin{equation}
   \lambda = \frac{1}{1 + P_e} .
\end{equation}
For example, $P_e=1$ induces $\lambda = 0.5$;
as $P_e \rightarrow 0$, $\lambda \rightarrow 1$.
In other words,
as the estimated probability of executing the path goes down,
the planner becomes greedier w.r.t. planning effort at the expense of
costlier solution paths.

This is all one-step greedy;
it returns the optimal path optimistically,
assuming it will be collision-free.
If we have some estimate of the proportion $P_u$ of evaluated edges
which will be part of the final path,
we can then choose a cost function which downweights the planning time.
I need to work this out.

\subsection{How can incremental graph search ideas (e.g. LPA*)
   be used to efficiently implement the E$^8$ algorithm?}
\label{ques:incremental-search}

See Chapter~\ref{chap:e8}, especially Algorithm~\ref{alg:e8}.
The algorithm is clearly making multiple graph search queries
over a fixed graph with only a few edge costs changing between queries.
While, for small graphs, graph search time is small,
for larger graphs,
it will become significant.
It should be relatively straightforward to implement LPA* here.
We just have to do it!

\subsection{How does the explicit graph approach of E$^8$ compare to
   weighted and anytime implicit algorithms?}
\label{ques:e8-comparisons}

Narrow this to problems with expensive edge evaluations.

\subsection{How should discrete graphs be constructed in continuous
   $\mathcal{C}$-spaces with spatially correlated execution costs?}
\label{ques:batching}

Chapter~\ref{chap:graphs-in-continuous}
discusses how to embed roadmaps in $\mathcal{C}$
so that they can be searched by E$^8$.

The problem with na\"{\i}vly running E$^8$ on a
dense roadmap in $\mathcal{C}$
is that it tends to bunch up in local minima.
This is because reducing the continuous planning problem
to a graph search ignores the spatial correlation
inherent in $\mathcal{C}_{\mbox{\scriptsize free}}$.

One way to capture this is to maintain a probabalistic model
of $\mathcal{C}_{\mbox{\scriptsize free}}$,
and then optimize in expectation.
In particular,
instead of greedily choosing the best path based on
optimistic estimates of one-time planning and execution cost:
\begin{equation}
   f(\pi) = \lambda \hat{f}_p(\pi) + (1-\lambda) \hat{f}_x(\pi),
\end{equation}
we instead reason over the total \emph{expected} remaining cost:
\begin{align}
   f(\pi)
      &= E \left[ \lambda f_p(\pi) + (1-\lambda) f_x(\pi) \right] \\
   &= P_{\mbox{\scriptsize free}}(\pi)
      \left[ \lambda \hat{f}_p(\pi) + (1-\lambda) \hat{f}_x(\pi) \right]
      + (1-P_{\mbox{\scriptsize free}}(\pi))
      \left[ \lambda F_p + (1-\lambda) F_x \right]
\end{align}

Consider the the problem from Figure~\ref{fig:example-in-expectation}.
There are an infinite number of paths to the goal,
each consisting of walking along the sidewalk,
followed by crossing the street perpendicuarly at a particular
position $x$.
The sidewalk is known to be collision-free,
whereas each position on the street must be tested for collision
with obstacles with planning validation cost $\hat{f}_p(\pi)$
independent of $x$.
Execution cost $f_x(\pi)$ is given by $|x|+c$.

Suppose we first test walking straight across the street $\pi_0$
(knowing nothing, this is clearly the optimistically cheapest path)
and this is deemed in collision.
Which path should we consider next (e.g $\pi_a$ or $\pi_b$)?

What is our model for $P_{\mbox{\scriptsize free}}(\pi)$?
Radial basis functions.

We are operating under assumptions:
\begin{itemize}
\item Single-shot greedy (won't choose \emph{sets} of paths
   which minimize remaining effort)
\item Operates over \emph{paths} instead of configurations
   or edges (won't probe points, no explicit exploration)
\end{itemize}

\begin{figure}
   \begin{center}
   \includegraphics{build/example-in-expectation}
   \end{center}
   \caption{Simple example problem to illustrate optimizing
      remaining ensemble cost in expectation.}
   \label{fig:example-in-expectation}
\end{figure}

\subsection{What path evaluation strategy performs best
   across manipulation tasks?}
\label{ques:evalpath}

This has two paths.
For E$^8$,
we're confined to evaluating edges wholesale.
For the E$^8$-PRM,
we are free to do partial edge evaluations.
What tends to perform best?

\subsection{How does the extent of disclosed multi-set structure
   affect planner performance on multi-step problems?}
\label{ques:multi-set-suited}

See Chapter~\ref{chap:multi-set-prm}.

\subsection{How does the amount of inter-step coupling
   affect the merit of interleaving planning and execution?}
\label{ques:how-sequence}

Especially relevant for Proteus,
see Chapter~\ref{chap:task-planning}.

Compared to HPN
in experimental section, Chapter~\ref{chap:experiments}.

In particular,
more coupling means you should plan ahead farther,
and interleave less.

Compelemtary to learning approaches
to determine what are good Markov islands.

\subsection{How does the \textsc{Proteus} task planner
   compare experimentally to baseline approaches
   on \textsc{HERB} and \textsc{CHIMP}?}
\label{ques:drc-compare}

See Chapter~\ref{chap:task-planning}.

See Chapter~\ref{chap:experiments}.

I want to run my planner on the DRC Trials data
and show significant improvement.

I want to greatly expand the number of manipulation planning tasks
on the HERB platform in my data set.


}%for custom Q1 subsection numbering

\section{Timeline}

See Table~\ref{table:proposed-timeline} for the timeline.
It's currently very aggressive.

I'm not sure if integration of my OMPL planner
is in the best interests of the DRC project.
Will know more about this after the March 2015 DRC meetup.
In any case, I'd like to test against Trials data
(abd perhaps Finals data if it's available).

\begin{table}
\begin{widepage}
   \centering
   {
   \renewcommand{\arraystretch}{1.5}
   \begin{tabular}{lccl}
   \toprule
   {\bf Topic} & {\bf Chapter} & {\bf Questions} & {\bf Deadline} \\
   \midrule
   Guided Manipulation Planning at the DRC Trials \cite{dellin2014drc}
      & \ref{chap:formulation}
      &
      & February 2014 (ISER) (completed) \\
   Comprehensive Multi-Root Planning \cite{dellin2015cmr}
      & \ref{chap:cmr}
      &
      & October 2014 (ICRA) (completed) \\
   Reduce, Reuse, Recycle: Multi-Set Planning \cite{dellin2015multiset}
      & \ref{chap:multi-set}, \ref{chap:multi-set-prm}
      & \ref{ques:choosing-lambda}, \ref{ques:incremental-search}
      & January 2015 (RSS) (in submission) \\
   \midrule
   Proposal
      & & & March 2015 \\
   ??
      & 
      & 
      & March 2015 (ISRR) \\
   DRC Integration (presuming project alignment)
      & & & April-May 2015 \\
   Multi-Set Planning for the DRC
      & \ref{chap:multi-set-prm}, \ref{chap:task-planning}
      & \ref{ques:how-sequence}, \ref{ques:drc-compare}
      & June 2015 (Humanoids) \\
   HERB Experiments
      & \ref{chap:multi-set-prm}, \ref{chap:task-planning}
      & \ref{ques:multi-set-suited}, \ref{ques:herb-performance}
      & July-August 2015 \\
   The E$^8$-PRM: Optimizing Total Task Cost
      & \ref{chap:e8}, \ref{chap:graphs-in-continuous}
      & \ref{ques:choosing-lambda}, \ref{ques:batching}
      & September 2015 (AAAI) \\
   Thesis Writing
      & & & September-November 2015 \\
   Bored Robots: Hypothesized Conservative Volumes
      & & & October 2015 (ICRA) \\
   Defense
      & & & December 2015 \\
   \bottomrule
   \end{tabular}
   } %arraystretch
\end{widepage}
\caption{Proposed Timeline. \cdnote{This is quite agressive.}}
\label{table:proposed-timeline}
\end{table}

\section{Open-Source Software}

\begin{itemize}
\item Release implementation of E$^8$-PRM (OMPL) 
\item Release implementation of multi-set decomposer (OpenRAVE+OMPL)
\item Release implementation of \textsc{Proteus}
\end{itemize}
